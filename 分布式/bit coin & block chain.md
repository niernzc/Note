#### 比特币

一种P2P形式的虚拟的加密数字货币。P2P意味着一个去中心化的支付系统。比特币不依靠特定的货币机构发行，而是依据特定算法，通过大量计算产生，比特币经济使用整个P2P网络中众多节点构成的分布式数据库来确认并记录所有的交易行为，并使用密码学的设计来确保货币流通各个环节的安全性。

__比特币的数据结构是区块链__

#### 区块链

本质上是一个共享数据库，存储于其中的数据或信息，具有去中心化、不可伪造、全程留痕、可以追溯、公开透明特征。

#### 共识

一个群体的成员就某一方面达成一致，对规则的一致认可；一个群体采用的达成和维护共识的机制，即共识机制

#### 区块链的共识机制

区块链是一个公共账本、公开的数据库，同时也是一个点对点的协作网络。协作方（节点）共同维护数据，每个节点都有一份完整的数据备份，所有节点的数据内容必须完全一致，每个节点都可以在本地查找交易记录，每个节点都可以在本地添加交易。

没有一个中心来指挥、协调，完成协作，区块链必须有一个共识机制，该机制必须解决两个基本问题：

> 谁有权写入数据——一次只有一个人可以记账
>
> 其他人如何同步数据——需要保持账本的一致性

数据的写入（区块添加）的过程：有权打包交易的节点，将打包的交易（区块）放在既有数据库（区块链）上，并向全网广播，其他节点收到信息，验证区块无误，便同步这个新打包的交易。每个打包的交易叫做一个**区块**，区块不断增加，区块链不断延长。

同步数据的问题在于*如何对在一定时间发生的交易的先后顺序达成一致？*

即，由于各个节点都在自发记账或者同步，在点对点的相互通信中存在较高的网络延迟，因此各个节点收到数据的先后顺序是不一致的，*如何保证每个节点副本数据的一致性*。

区块链的共识：以最长的链作为主链，每个节点总是选择并尝试延长主链，也就是每个节点都以区块最多的那条链作为自己添加、更新区块的选择，这样多节点就能同步一个权威的公共账本

重点要解决的第一个问题：**谁有权写入数据**

主要有三种方法：POW、POS和DPOS

* Proof Of Work，工作量证明
  工作量即计算机计算随机数的过程。每个节点都计算一个随机数，一定时间段内，找到随机数的难度是一定的，即得到这个随机数必然要经过一定的工作量。最先得到这个随机数的节点，将打包的交易区块添加到既有的区块链上并向全网广播，其他节点验证、同步
* Proof Of Stake，权益证明
  系统根据节点持有的Token（代币）的数量以及时间的乘积数（币天数）分配相应的记账权，拥有的越多，获得记账权的概率越大。Token相当于系统的权益（Stake）
* Delegated Proof Of Stake
  在POS中，拥有Token就拥有记账权，而在DPOS中拥有Token的人投票给固定的节点

关于协作的几个问题：

- 如何吸引参加协作：
  与中心化组织相同，依靠激励。区块链靠分配Token激励各方参与协作
- 如何处理不守规则的人：
  参与协作必须遵守设定的规则，不愿意接受共识，无法成为协作组织的一员
- 如何避免破坏共识：
  区块链的共识是每个节点都尝试延长主链，而主链区块最多，大多数节点共同维护认可的数据库，因此破坏需要拥有多数节点，即51%攻击。

> 各方按照既定规则参与协作，代码代替权威，Token产生激励，博弈驱逐破坏者，协作自然达成



